‡πÑ‡∏î‡πâ ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡∏£‡∏∏‡∏õ `vw_c102_request_tambon` ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏ï‡πà‡∏Ñ‡∏£‡∏ö üëá

## VIEW ‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ (‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°)

`vw_c102_request_tambon` ‡πÄ‡∏≠‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‚Äú‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ C102‚Äù (`c102_request_for_relief` = crfr) ‡∏°‡∏≤‡∏™‡∏£‡∏∏‡∏õ **‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà (group ‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô)** ‡πÇ‡∏î‡∏¢ join ‡πÑ‡∏õ‡∏´‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏†‡∏±‡∏¢‡∏û‡∏¥‡∏ö‡∏±‡∏ï‡∏¥ + ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏†‡∏±‡∏¢‡∏û‡∏¥‡∏ö‡∏±‡∏ï‡∏¥ + ‡∏ü‡∏≠‡∏£‡πå‡∏° C10 + ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ C11 ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏ß‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå/‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‚Äú‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏° *‡∏ä‡∏ô‡∏¥‡∏î‡∏¢‡πà‡∏≠‡∏¢‡∏™‡∏±‡∏ï‡∏ß‡πå* (animal_sub_type)‚Äù ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà `mast.id` 1‚Äì31

‡∏™‡∏£‡∏∏‡∏õ‡∏á‡πà‡∏≤‡∏¢‡πÜ:
**1 ‡πÅ‡∏ñ‡∏ß = 1 ‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô (bda.village_id)** ‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏µ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå:

* ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÅ‡∏¢‡∏Å `amount_mast_1..amount_mast_31`
* ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏¢‡∏Å `total_mast_1..total_mast_31` (help_rate * amount)

---

## ‡∏ï‡∏≤‡∏£‡∏≤‡∏á/‡∏ß‡∏¥‡∏ß‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏û‡∏£‡πâ‡∏≠‡∏° alias)

1. `c102_request_for_relief` `crfr` ‚úÖ (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å)
2. `b000_open_disaster` `bod`
3. `b100_disaster_area` `bda`
4. `c10_request_for_relief` `crfr2`
5. `c11_request_damage_count` `crdc`
6. `m_anima_sub_type` `mast`
7. `ex_farmer` `ef`
8. `m_province` `mp`
9. `m_amphur` `ma`
10. `m_tambon` `mt`
11. `m_village` `mv`

**‡∏™‡∏£‡∏∏‡∏õ:** ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î **11 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á/‡∏ß‡∏¥‡∏ß**

---

## ‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (GROUP BY)

* `GROUP BY bda.village_id`

> ‚ö†Ô∏è ‡∏à‡∏∏‡∏î‡∏ô‡πà‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á: ‡πÉ‡∏ô SELECT ‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ó‡∏µ‡πà ‚Äú‡πÑ‡∏°‡πà aggregate‚Äù (‡πÄ‡∏ä‡πà‡∏ô `crfr.id`, `ef.full_name`, `bod.name` ‡∏Ø‡∏•‡∏Ø) ‡πÅ‡∏ï‡πà group ‡πÅ‡∏Ñ‡πà `village_id`
> ‡∏ñ‡πâ‡∏≤ MySQL ‡πÄ‡∏õ‡∏¥‡∏î `ONLY_FULL_GROUP_BY` ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô
> ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏õ‡∏¥‡∏î‡πÑ‡∏ß‡πâ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏û‡∏ß‡∏Å‡∏ô‡∏µ‡πâ‡∏à‡∏∞ ‚Äú‡∏™‡∏∏‡πà‡∏°‡∏´‡∏¢‡∏¥‡∏ö‚Äù ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÅ‡∏ñ‡∏ß‡πÉ‡∏î‡πÅ‡∏ñ‡∏ß‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ô‡∏±‡πâ‡∏ô (‡πÑ‡∏°‡πà‡∏ô‡∏¥‡πà‡∏á)

---

## Output ‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà VIEW ‡∏Ñ‡∏∑‡∏ô‡∏°‡∏≤ (‡∏´‡∏°‡∏ß‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)

### ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏Ç‡∏≠ / ‡∏ü‡∏≠‡∏£‡πå‡∏°

* `crfr.id`, `approved_status`, `approved_at`, `approved_by`
* `crfr.c10_id`, `crfr2.start_date`, `crfr2.end_date`

### ‡πÄ‡∏´‡∏ï‡∏∏‡∏†‡∏±‡∏¢‡∏û‡∏¥‡∏ö‡∏±‡∏ï‡∏¥ / ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà

* `bod.name`
* `bda.annonced_title`
* `bda.province_id/amphur_id/tambon_id/village_id` + ‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà `mp/ma/mt/mv`

### ‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡πà‡∏ô (‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£)

* `count(distinct ef.farmer_id) as farmer_ids`
* ‡πÅ‡∏ï‡πà‡∏Å‡πá‡∏¢‡∏±‡∏á select `ef.id/full_name/national_id` ‡∏°‡∏≤‡∏î‡πâ‡∏ß‡∏¢ (‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÜ‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö group by)

### ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ + ‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠

* `amount_mast_1..amount_mast_31` = sum(crdc.amount) ‡∏ï‡∏≤‡∏° `animal_sub_type_id`
* `total_mast_1..total_mast_31` = sum(mast.help_rate * crdc.amount)

---
