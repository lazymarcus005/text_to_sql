‡πÑ‡∏î‡πâ ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡∏£‡∏∏‡∏õ `vw_c12_summary_assis` ‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ + ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á üëá

## VIEW ‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ (‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°)

`vw_c12_summary_assis` ‡πÄ‡∏≠‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‚Äú‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (level_area = province)‚Äù ‡∏°‡∏≤‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô ‡πÇ‡∏î‡∏¢‡∏≠‡∏¥‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏Ç‡∏≠ (`c101_request_area` = cra) ‡πÅ‡∏•‡πâ‡∏ß join ‡πÑ‡∏õ‡∏´‡∏≤

* ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏£‡∏∏‡∏õ C12 (`c12_summary_assis` = csa)
* ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏±‡∏¢‡∏û‡∏¥‡∏ö‡∏±‡∏ï‡∏¥ (`b000_open_disaster` = bod)
* ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ C102 (`c102_request_for_relief` = crfr)
* ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ñ‡∏≥‡∏Ç‡∏≠ C10 (`c10_request_for_relief` = crfr2)
* ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢/‡∏¢‡∏≠‡∏î‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å C11 (`c11_request_damage_count`) ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏ä‡∏ô‡∏¥‡∏î‡∏™‡∏±‡∏ï‡∏ß‡πå 1‚Äì14 ‡∏ú‡πà‡∏≤‡∏ô‡∏ã‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏£‡∏µ `tcrdc`
* ‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà (‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡∏ï‡∏≥‡∏ö‡∏•/‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô) ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏†‡∏±‡∏¢‡∏û‡∏¥‡∏ö‡∏±‡∏ï‡∏¥

‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ `GROUP BY cra.b10_disaster_area_id` ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡πÅ‡∏ö‡∏ö distinct

### ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏á (WHERE)

* `cra.level_area = 'province'`
* `crfr2.approved_status = 'approved'`
* `tcrdc.approved_status = 'approved'`
* `csa.id is not null` (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ summary c12 ‡∏à‡∏£‡∏¥‡∏á)

---

## ‡∏ï‡∏≤‡∏£‡∏≤‡∏á/‡∏ß‡∏¥‡∏ß‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏û‡∏£‡πâ‡∏≠‡∏° alias)

### Main / joins

1. `c101_request_area` `cra` ‚úÖ (‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å)
2. `c12_summary_assis` `csa`
3. `b000_open_disaster` `bod`
4. `c102_request_for_relief` `crfr`
5. `ex_farmer` `ef`
6. `m_province` `mp`
7. `m_amphur` `ma`
8. `m_tambon` `mt`
9. `m_village` `mv`
10. `c10_request_for_relief` `crfr2`
11. `b100_disaster_area` `bda`
12. `m_disaster_type` `mdt`

### ‡∏ã‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏£‡∏µ (derived table) `tcrdc`

13. `c11_request_damage_count` `crdc`
14. `m_animal_type` `mat`

**‡∏™‡∏£‡∏∏‡∏õ:** ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î **14 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á/‡∏ß‡∏¥‡∏ß** (12 ‡∏ï‡∏±‡∏ß‡∏î‡πâ‡∏≤‡∏ô‡∏ô‡∏≠‡∏Å + 2 ‡∏ï‡∏±‡∏ß‡πÉ‡∏ô‡∏ã‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏£‡∏µ)

---

## Output ‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà VIEW ‡∏Ñ‡∏∑‡∏ô‡∏°‡∏≤ (‡πÑ‡∏Æ‡πÑ‡∏•‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)

* ‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà/‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå: `cra.b10_disaster_area_id`, `cra.b00_open_disaster_id`, `bod.name`, `start_at`, `end_at`
* ‡∏™‡∏£‡∏∏‡∏õ‡∏á‡∏ö/‡∏¢‡∏≠‡∏î‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏≤‡∏Å `cra`: `value_assis_amount`, `organization_assis_amont`, `government_budget`, `permanent_secretary_budget`, `approved_at`
* ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ summary: `csa.status`, `created_at/updated_at`, `created_by_id/updated_by_id`
* ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà: `province/amphur/tambon/village` ids + names
* ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£: `count(distinct ef.farmer_id)` ‡πÄ‡∏õ‡πá‡∏ô `farmer_ids`
* ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏†‡∏±‡∏¢‡∏û‡∏¥‡∏ö‡∏±‡∏ï‡∏¥: `bda.disaster_type_id`, `mdt.disaster_type`
* ‡∏¢‡∏≠‡∏î‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å `tcrdc`: `approved_total_aid`, `approved_amount`
* ‡πÅ‡∏ï‡∏Å‡∏¢‡∏≠‡∏î‡∏ï‡∏≤‡∏° animal_type 1‚Äì14: `amount_mat_1 .. amount_mat_14`

> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏•‡πá‡∏Å‡πÜ: `approved_total_aid` ‡πÉ‡∏ô‡∏ã‡∏±‡∏ö‡∏Ñ‡∏¥‡∏ß‡∏£‡∏µ‡πÉ‡∏ä‡πâ `format(sum(...),2)` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô ‚Äústring‚Äù ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà number (‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á cast)
